{% extends "issues/base.html" %}
{% load gravatar %}

{% block title %}
    {{ block.super }}
    Projects
{% endblock %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/project_list.css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
{% endblock %}

{% block js %}
    {{ block.super }}
    <script type="text/javascript" src="{{ STATIC_URL }}js/project_list.js"></script>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script>
    $(document).ready(function() {

    });
    $(function() {
        $( 'div[id^="tabs"]' ).tabs({ collapsible: true });
    });
    </script>
{% endblock %}

{% block content %}
    {{ block.super }}

        <div class="data_segment right alone_right">
            <div class="header">
                
                <div class="header-title"><img class = "gravatar_medium" src="{{ user.email|gravatar }}"/> {{ user_data.first_name }}</div>            
            </div>

            <p><label class = "statistic">In Progress: </label><label>{{ user_data.inprogress_issues.count }}</label></p>
            <p><label class = "statistic">Assigned:  </label><label>{{ user_data.assigned_issues.count }}</label></p>
            <p><label class = "statistic">Completed: </label><label>{{ user_data.completed_issues.count }}</label></p>
            <p><label class = "statistic">Most Active: </label> ???? </p>
            <p><label class = "statistic">Last Project: </label><label>{{ user_data.last_completed.project.as_a }}</label></p>
            <p><label class = "statistic">Last Completed: </label><p class = "small_text_wrap">{{ user_data.last_completed|truncatechars:256 }}</p></p>
            <label></label>
        </div>

<div id="wrapper">  
    <div id="tabs-{{ user.pk }}" class="tabs">

        <ul>
            <li id="developer-in-tabs"><img class = "gravatar_small" src="{{ user.email|gravatar }}"/> {{ user_data.first_name }}</li>
            <li><a href="#tabs-{{ user.pk }}-inprogress" class="tab">In Progress</a></li>
            <li><a href="#tabs-{{ user.pk }}-assigned" class="tab">Assigned</a></li>
            <li><a href="#tabs-{{ user.pk }}-completed" class="tab">Completed</a></li>
        </ul>


        <div id="tabs-{{ user.pk }}-inprogress" class="tab-content">
            {% for issue in user_data.inprogress_issues %}
            <div class="issue">
                <div class="issue-left">
                    {{ issue }}
                </div>
                <div class="issue-right">
                    {{ issue.project.as_a }}</a>
                </div>
            </div>
            {% endfor %}
        </div>
        <div id="tabs-{{ user.pk }}-assigned" class="tab-content">
            {% for issue in user_data.assigned_issues %}
            <div class="issue">
                <div class="issue-left">
                    {{ issue }}
                </div>
                <div class="issue-right">
                    {{ issue.project.as_a }}</a>
                </div>
            </div>
            {% endfor %}
        </div>
        <div id="tabs-{{ user.pk }}-completed" class="tab-content">
            {% for issue in user_data.completed_issues %}
            <div class="issue">
                <div class="issue-left">
                    {{ issue }}
                </div>
                <div class="issue-right">
                    {{ issue.project.as_a }}</a>
                </div>
            </div>
            {% endfor %}                         
        </div>
    </div>
</div>
    
{% endblock %}
